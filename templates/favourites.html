{% extends "base.html" %}

{% block content %}
<div class="space-y-8">

    <div class="flex items-center justify-between">
        <div class="flex items-center gap-4">
            <a href="{{ url_for('main.index') }}"
                class="w-10 h-10 rounded-full bg-white/5 flex items-center justify-center hover:bg-white/10 transition-colors">
                <span class="text-xl">←</span>
            </a>
            <h1 class="text-4xl md:text-5xl font-extrabold tracking-tighter uppercase text-[var(--resin-pink)]">
                Favourites</h1>
        </div>
        <span class="mono text-xs opacity-50">COUNT: {{ favourites|length }}</span>
    </div>

    {% if favourites %}
    <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-6">
        {% for book in favourites %}
        <div class="resin-slab p-4 group cursor-pointer relative flex flex-col min-h-[350px]">
            <!-- Make entire card content clickable via linkage to details -->
            <a href="{{ url_for('main.book_details', id=book.id) }}" class="block flex-1 flex flex-col">
                <div
                    class="aspect-[2/3] bg-zinc-900 rounded-md mb-4 overflow-hidden relative border border-white/5 shadow-[0_0_20px_rgba(255,100,200,0.1)] group-hover:shadow-[0_0_30px_rgba(255,100,200,0.3)] transition-all">
                    {% if book.cover_image %}
                    <img src="{{ book.cover_image }}" alt="Book"
                        class="object-cover w-full h-full grayscale-[50%] group-hover:grayscale-0 transition-all duration-700 scale-105 group-hover:scale-100">
                    {% else %}
                    <div class="w-full h-full flex items-center justify-center text-center p-2 bg-zinc-800">
                        <span class="mono text-[9px] opacity-30">{{ book.title }}</span>
                    </div>
                    {% endif %}
                    <div class="absolute top-2 right-2 text-[var(--resin-pink)]">♥</div>
                </div>

                <div class="space-y-1 flex-1 flex flex-col">
                    <div class="flex justify-between items-start">
                        <div class="mono text-[10px] 
                                {% if book.status == 'Reading' %}text-[var(--resin-pink)]
                                {% elif book.status == 'Completed' %}text-[var(--resin-teal)]
                                {% else %}text-[var(--resin-yellow)]{% endif %}">
                            #{{ book.status.upper() }}
                        </div>
                    </div>
                    <h4 class="font-extrabold text-sm truncate uppercase tracking-tight mb-auto">{{ book.title }}</h4>
                    <p class="mono text-[10px] opacity-50 truncate">{{ book.author }}</p>
                </div>
            </a>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="resin-slab p-20 text-center opacity-50">
        <p class="mono text-sm">NO_FAVOURITES_DETECTED</p>
    </div>
    {% endif %}

</div>
{% endblock %}